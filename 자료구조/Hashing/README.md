# Hashing

##### 검색키에 대한 산술 연산을 이용한 검색 방식

검색 키 값을 입력 값으로 계산을 실시하면 검색하려는 자료의 위치(주소)를 알 수 있다



### Hash table : 해싱 함수에 의해 계산된 주소에 따라 자료를 저장하는 자료 구조

키(key) , 해시함수(hash function), 해시(hash), 값(value), 저장소(bucket,slot)로 구성됨

- **키(key)** : 고유한 값, 해시 함수의 input
- **해시 함수(hashing function)** : 검색 키 값을 이용하여 저장된 자료의 위치(주소)를 변환 하는 함수. 어떤 해싱 함수를 사용하느냐에 따라 검색 속도와 저장 효율성이 결정됨.
- **해시(hash)** : 해시 함수의 결과물. 저장소에서 값과 매칭되어 저장됨
- **값(value)** : 저장소에 최종적으로 저장되는 값. 키와 매칭되어 저장/삭제/검색/접근이 가능해야함



##### **장점**

 검색 키를 계산하여 찾으려는 자료의 위치를 바로 알 수 있기 때문에 검색에 필요한 평균 시간 복잡도가 **최소 O(1)** 이 가능하다.즉, 단순히 키 값에대한 산술적 계산만 하면 검색이 가능하기 때문에 자료의 개수 n과 상관없이 특정한 상수 시간 내에 검색 할 수 있다. 

##### **단점**

-  순서가 있는 배열에 어울리지 않음 : 상하관계 or 순서가 중요한 데이터의 경우

-  공간 효율성이 떨어짐 : 데이터가 저장되기 전에 미리 저장공간을 확보해 놓아야 한다. 공간이 부족하거나 아예 채워지지 않는 경우가 생길 가능성이 있음

-  hash function의 의존도가 높음 : 평균 데이터 처리의 시간 복잡도는 O(1)이지만, 이는 해시 함수의 연산을 고려하지 않은 결과다. 해시 함수가 매우 복잡하다면 해시테이블의 모든 연산의 시간 효율성은 증가할 것이다.



### 검색

전달받은 검색 키 값으로 버킷의 주소를 계산한다. 즉 해싱함수를 이용하여 검색 키에 대한 주소를 계산한다.

1. 검색 자료의 주소 계산 : 검색 키 값을 입력 값으로 하여 해싱 함수로 계산

   key -> hash function -> address

2. 해시 테이블의 자료 점검 : 앞 단계에서 계산된 주소로 해시 테이블에서 실제 자료가 있는지 점검

3. 검색 완료 : 검색 대상 항목이 있으면 검색 성공으로 종료, 검색 대상 항목이 없으면 검색 실패



### 삭제 

저장되어 있는 값을 삭제할 때는 저장소에서 해당 키와 매칭되어 있는 값을 찾아서 삭제한다. (저장소에는 hash와 value가 함께 저장되어 있으므로 함께 지우면 된다.)



### 저장

 검색과 마찬가지로 먼저 전달 받은 검색 키 값에 대해 해싱 함수를 이용하여 주소를 계산한다. 만약 계산된 주소에 자료가 없으면 해당 위치에 자료를 저장한다. 만약 계산된 주소에 다른 자료가 저장되어 있다면 충돌(Collision)이 발생한다.



### 충돌(Collision) 해결 방법

1. ##### 개방 주소법(Open Addressing)

   **해싱 함수로 산출된 주소가 비어 있지 않는 경우에 그 다음 주소가 비어있는지 조사하는 방법**. 만약 빈 주소면 해당 자료를 저장하고, 빈 주소가 아니라면 다음 주소로 이동하여 빈 주소인지 점검한다. 즉, 해시 테이블의 모든 주소를 점검할 때까지 이런 과정을 되풀이하여 빈주소를 찾는 방법을 통해 충돌 문제를 해결한다. 해시 테이블의 모든 주소가 모두 찬 경우에는 자료를 저장할 수 없다.

   **장점** : 또 다른 저장공간 없이 해시테이블 내에서 데이터 저장 및 처리가 가능. 또 다른 저장공간에서의 추가적인 작업 없음.

   **단점** : 해시 함수의 성능에 전체 해시 테이블의 성능이 달림. 데이터의 길이가 늘어나면 그에 해당하는 저장소를 마련해 두어야함(저장소가 어느 정도 채워졌을 때 저장소의 사이즈를 늘려주는 것이 필요함)

   - 선형 조사법(Linear Probing)

     충돌이 발생할 경우 주소를 일정한 상수만큼 증가시켜 다시 조사해보는 방법.

     단점 : 충돌이 발생한 주소를 시작으로 차례로 저장되기 때문에 한번 추돌이 발생하기 시작하면 충돌이 발생한 주소 주위로 자료가 뭉치는 군집화 현상이 발생할 가능성이 크다. 

   - 제곱 조사법(Quadratic Probing)

     충돌이 발생할 경우 주소를 조사 횟수의 제곱만큼 증가시켜서 다시 조사해보는 방법.

     단점 : 1차 군집화 현상은 발생하기 어려우나 여전히 군집화 현상의 발생 가능성 있음. 해시 테이블의 모든 주소를 조사하기 위해서는 해시 테이블의 크기가 반드시 소수여야 한다는 제약 사항이 존재.

   - 이중 해싱(Double Hashing)

     충돌이 발생할 경우 주소를 원래의 해싱 함수와는 다른 추가적인 해싱 함수를 이용해 주소를 증가시켜 다시 조사해보는 방법.

     장점 : 추가 해싱 함수를 사용함으로써 같은 해싱 함수 값을 가지더라도 다른 조사 순서를 가지도록 하여 2차 집중이 줄어듬.

     

2. ##### Chaining

   **해시 테이블의 구조를 변경하여 각 주소(버킷)에 하나 이상의 검색 키 값이 저장될 수 있도록 하는 방법**. 즉, 각 주소에 연결 리스트를 사용하여 충돌이 발생할 때 동적으로 여러 개의 검색 키 값을 저장할 수 있게 한 방법이다. 같은 버킷에 저장된 synonyn가 여러개 일수 있으며, 이 경우 연결 리스트에 대한 선형 검색을 통해 원하는 자료를 검색 할 수 있다.

   **장점** : 한정된 저장소(Bucket)을 효율적으로 사용할 수 있음. 해시 함수를 선택하는 중요성이 상대적으로 적음. 상대적으로 적은 메모리를 사용함(미리 공간을 잡아 놓을 필요 x)

   **단점** : 한 hash에 자료들이 계속 연결된다면(쏠림 현상) 검색 효율이 낮아짐. 외부 저장 공간을 사용함. 외부 저장 공간 작업을 추가로 해야함.



참고

- [https://velog.io/@cyranocoding/Hash-Hashing-Hash-Table%ED%95%B4%EC%8B%9C-%ED%95%B4%EC%8B%B1-%ED%95%B4%EC%8B%9C%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0%EC%9D%98-%EC%9D%B4%ED%95%B4-6ijyonph6o](https://velog.io/@cyranocoding/Hash-Hashing-Hash-Table해시-해싱-해시테이블-자료구조의-이해-6ijyonph6o)
